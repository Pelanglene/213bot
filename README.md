# Telegram Ping Bot

–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π Telegram –±–æ—Ç —Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –¥–ª—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/start` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/ping` - —Å–ª—É—á–∞–π–Ω–∞—è —Ñ—Ä–∞–∑–∞ –∏–∑ JSON
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/kill_random` - –∫–∏–∫–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏–∑ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞ (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/help` - –ø–æ–º–æ—â—å
- ‚úÖ Dead chat –¥–µ—Ç–µ–∫—Ç–æ—Ä - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç "üíÄ dead chat" –µ—Å–ª–∏ –≤ —á–∞—Ç–µ –Ω–µ –±—ã–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–π 15 –º–∏–Ω—É—Ç (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å 9:00 –¥–æ 21:00 –ú–°–ö)
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –¢–µ—Å—Ç—ã
- ‚úÖ Docker support
- ‚úÖ Pre-commit hooks

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –° Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ü–æ–ª—É—á–∏—Ç–µ Telegram API credentials –Ω–∞ https://my.telegram.org
   - API_ID (—á–∏—Å–ª–æ)
   - API_HASH (—Å—Ç—Ä–æ–∫–∞)

2. –°–æ–∑–¥–∞–π—Ç–µ `.env`:
```bash
echo "BOT_TOKEN=YOUR_BOT_TOKEN" > .env
# –ù–∏–∂–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π):
# echo "API_ID=YOUR_API_ID" >> .env
# echo "API_HASH=YOUR_API_HASH" >> .env
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ —Å–µ—Å—Å–∏—é:
```bash
make install
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –≤–∫–ª—é—á–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (—Å–º. –Ω–∏–∂–µ)
# make authorize
```
   –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏–∑ Telegram.

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
make docker-up
```

5. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
make docker-logs
```

### –õ–æ–∫–∞–ª—å–Ω–æ

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
make install
```

2. –°–æ–∑–¥–∞–π—Ç–µ `.env`:
```bash
echo "BOT_TOKEN=YOUR_BOT_TOKEN" > .env
# –ù–∏–∂–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π):
# echo "API_ID=YOUR_API_ID" >> .env
# echo "API_HASH=YOUR_API_HASH" >> .env
```

3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ Telegram —Å–µ—Å—Å–∏—é:
```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –≤–∫–ª—é—á–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (—Å–º. –Ω–∏–∂–µ)
# make authorize
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
make run
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
213bot/
‚îú‚îÄ‚îÄ bot/                    # –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ handlers/          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ services/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ config/            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ utils/             # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ middlewares/       # Middleware
‚îú‚îÄ‚îÄ data/                  # –î–∞–Ω–Ω—ã–µ (phrases.json)
‚îú‚îÄ‚îÄ tests/                 # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ main.py               # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îî‚îÄ‚îÄ Dockerfile            # Docker –æ–±—Ä–∞–∑
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–°–º–æ—Ç—Ä–∏—Ç–µ [CONTRIBUTING.md](CONTRIBUTING.md) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
make help          # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥
make install-dev   # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make authorize     # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Telegram —Å–µ—Å—Å–∏–∏
make run          # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
make test         # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
make lint         # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
make format       # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`:

```bash
BOT_TOKEN=your_bot_token          # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ: —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
# –ù–∏–∂–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –ù—É–∂–Ω—ã –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ Client API
API_ID=12345678                   # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–æ–ª—É—á–∏—Ç—å –Ω–∞ https://my.telegram.org
API_HASH=your_api_hash_here      # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–æ–ª—É—á–∏—Ç—å –Ω–∞ https://my.telegram.org
SESSION_NAME=bot_session         # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –∏–º—è —Å–µ—Å—Å–∏–∏ Pyrogram
LOG_LEVEL=INFO                    # DEBUG, INFO, WARNING, ERROR
DEBUG=false                       # true/false
PHRASES_FILE=data/phrases.json   # –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å —Ñ—Ä–∞–∑–∞–º–∏
DEAD_CHAT_MINUTES=15             # –ú–∏–Ω—É—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–ª—è dead chat
KILL_RANDOM_MUTE_HOURS=1         # –ß–∞—Å–æ–≤ –º—É—Ç–∞ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã /kill_random
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ—Ä–∞–∑

–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `data/phrases.json`:

```json
{
  "phrases": [
    "–í–∞—à–∞ —Ñ—Ä–∞–∑–∞ 1",
    "–í–∞—à–∞ —Ñ—Ä–∞–∑–∞ 2",
    "–í–∞—à–∞ —Ñ—Ä–∞–∑–∞ 3"
  ]
}
```

## –ö–æ–º–∞–Ω–¥–∞ /kill_random

–ö–æ–º–∞–Ω–¥–∞ `/kill_random` –º—É—Ç–∏—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö (–Ω–µ –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö)
- –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —á–∞—Ç–∞
- –£ –±–æ—Ç–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∞–≤–æ "–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤"
- –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –Ω—É–∂–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç (API_ID/API_HASH)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ï—Å–ª–∏ Client API –≤–∫–ª—é—á–µ–Ω (–∑–∞–¥–∞–Ω—ã API_ID/API_HASH –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è) ‚Äî –±–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–∞—Ç–∞, –∏—Å–∫–ª—é—á–∞–µ—Ç –±–æ—Ç–æ–≤/—É–¥–∞–ª—ë–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã/–∞–¥–º–∏–Ω–æ–≤ –∏ –≤—ã–±–∏—Ä–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞
2. –ï—Å–ª–∏ Client API –Ω–µ –≤–∫–ª—é—á–µ–Ω ‚Äî –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ø–∏—Å–æ–∫ –Ω–µ–¥–∞–≤–Ω–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è middleware) –∏ –≤—ã–±–∏—Ä–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∏–∑ –Ω–∏—Ö (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞)
3. –ú—É—Ç–∏—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –Ω–∞ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1 —á–∞—Å, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `KILL_RANDOM_MUTE_HOURS`)

**–ö—É–ª–¥–∞—É–Ω:** 1 —á–∞—Å –º–µ–∂–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è–º–∏ –∫–æ–º–∞–Ω–¥—ã **–≤ –∫–∞–∂–¥–æ–º —á–∞—Ç–µ** (–∫–æ–º–∞–Ω–¥—É –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ —Ä–∞–∑–Ω—ã—Ö —á–∞—Ç–∞—Ö).

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π Telegram –∞–∫–∫–∞—É–Ω—Ç (–Ω–µ –±–æ—Ç) ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω. –ë–µ–∑ –Ω–µ–≥–æ –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —É–ø—Ä–æ—â—ë–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ (–ø–æ –Ω–µ–¥–∞–≤–Ω–æ –∞–∫—Ç–∏–≤–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º). –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `make authorize` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
make test
```

## –õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
make lint     # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
make format   # –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```

## –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞

1. –ù–∞–ø–∏—à–∏—Ç–µ [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Python 3.11+
- python-telegram-bot 20.7 (Bot API)
- pyrogram 2.0 (Client API –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π)
- pytest –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- black, isort –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- flake8, mypy –¥–ª—è –ª–∏–Ω—Ç–∏–Ω–≥–∞
- Docker & Docker Compose

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## Contributing

–°–º. [CONTRIBUTING.md](CONTRIBUTING.md)
